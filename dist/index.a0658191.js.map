{"mappings":"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","sources":["src/main.js","src/modules/globals.js","src/modules/layoutExtractor.js","src/modules/keyboardInteraction.js","src/modules/navInteraction.js"],"sourcesContent":["import { DOM, Store } from \"./modules/globals\";\r\nimport { Extract } from \"./modules/layoutExtractor\";\r\nimport { Keys } from \"./modules/keyboardInteraction\";\r\nimport { Nav } from \"./modules/navInteraction\";\r\n\r\nfunction readLayout() {\r\n  const srcText = DOM.layoutForm.querySelector(\"textarea\").value;\r\n  Store.data = Extract.layoutData(srcText);\r\n  Store.layers = Extract.layerNames(Store.data);\r\n\r\n  switchToKeyboardView();\r\n  if (Store.layerStack.length == 0) {\r\n    Nav.addLayer(\"MAIN\");\r\n  }\r\n\r\n  Keys.renderLayer(\"MAIN\");\r\n\r\n  Store.toLocalStorage(Store.data);\r\n}\r\n\r\n// VIEWPORT FUNCTIONS\r\nfunction switchToFormView() {\r\n  console.log(\"going to form view...\");\r\n  DOM.keyboard.style.display = \"none\";\r\n  DOM.layerNav.style.display = \"none\";\r\n  DOM.viewSwitcher.style.display = \"none\";\r\n  DOM.layoutForm.style.removeProperty(\"display\");\r\n}\r\nfunction switchToKeyboardView() {\r\n  console.log(\"going to keyboard view...\");\r\n  DOM.layoutForm.style.display = \"none\";\r\n  DOM.keyboard.style.removeProperty(\"display\");\r\n  DOM.layerNav.style.removeProperty(\"display\");\r\n  DOM.viewSwitcher.style.removeProperty(\"display\");\r\n}\r\n\r\n// [[ SETUP ]]\r\nif (Store.localStorageExists()) {\r\n  Store.data = Store.fromLocalStorage();\r\n  Store.layers = Extract.layerNames(Store.data);\r\n  switchToKeyboardView();\r\n  Nav.addLayer(\"MAIN\");\r\n  Keys.renderLayer(\"MAIN\");\r\n} else {\r\n  switchToFormView();\r\n}\r\n\r\nDOM.layoutFormSubmit.addEventListener(\"click\", readLayout);\r\nDOM.viewSwitcher.addEventListener(\"click\", switchToFormView);\r\n","// DOM ELEMENT VARIABLES\r\nconst DOM = {\r\n  layoutForm: document.querySelector(\"#layout-form\"),\r\n  layoutFormSubmit: document.querySelector(\"#layout-submit\"),\r\n  viewSwitcher: document.querySelector(\"#view-switcher\"),\r\n  layerNav: document.querySelector(\"#layer-nav\"),\r\n  keyboard: document.querySelector(\"#keyboard\"),\r\n};\r\n\r\n// GLOBAL VARIABLES\r\nconst Store = {\r\n  data: {},\r\n  layers: [],\r\n  layerStack: [],\r\n  getCurrLayer() {\r\n    return this.layerStack[this.layerStack.length - 1];\r\n  },\r\n  toLocalStorage(lData) {\r\n    localStorage.setItem(\"KBLayoutData\", JSON.stringify(lData));\r\n  },\r\n  fromLocalStorage() {\r\n    return JSON.parse(localStorage.getItem(\"KBLayoutData\"));\r\n  },\r\n  localStorageExists() {\r\n    return this.fromLocalStorage() !== null;\r\n  },\r\n};\r\n\r\nexport { DOM, Store };\r\n","export const Extract = {\r\n  layoutData(src) {\r\n    const srcLayers = src.split(/(?<=')$/m);\r\n    let extracted = {};\r\n\r\n    for (i in srcLayers) {\r\n      // iterate over Layers\r\n      let name = extractLayerName(srcLayers[i]);\r\n      let rows = extractRows(srcLayers[i]);\r\n\r\n      let keys = rows.map((row, i) => {\r\n        //iterate over rows\r\n        if (i === 3) {\r\n          return extractKeys(row, 6);\r\n        } else {\r\n          return extractKeys(row);\r\n        }\r\n      });\r\n\r\n      extracted[name] = keys;\r\n    }\r\n\r\n    return extracted;\r\n  },\r\n  layerNames(src) {\r\n    return Object.keys(src).map((lName) => {\r\n      return lName;\r\n    });\r\n  },\r\n};\r\n\r\n// INTERNAL\r\nfunction extractLayerName(layer) {\r\n  return layer.match(/^\\w+$/m)[0];\r\n}\r\nfunction extractRows(layer) {\r\n  return layer.match(/^\\|[^\\-].+$/gm);\r\n}\r\nfunction extractKeys(row, twoUKeyAt) {\r\n  let rowCleaned = row.replace(/((?<=\\|)\\s\\|)|(^\\|)|(\\|$)/g, \"\");\r\n  let keys = rowCleaned.match(/.{1,8}/g);\r\n\r\n  let keysTwoUsMerged = [];\r\n  for (let i = 0; i < keys.length; i++) {\r\n    if (i == twoUKeyAt) {\r\n      keysTwoUsMerged.push(`${keys[i]}${keys[i + 1]}`);\r\n      i++;\r\n    } else {\r\n      keysTwoUsMerged.push(keys[i]);\r\n    }\r\n  }\r\n\r\n  let keysCleaned = keysTwoUsMerged.map((key) => {\r\n    return key.slice(0, -1);\r\n  });\r\n\r\n  return keysCleaned;\r\n}\r\n","import { Store } from \"./globals\";\r\nimport { Nav } from \"./navInteraction\";\r\n\r\nconst Keys = {\r\n  renderLayer(layerName) {\r\n    let layerData = Store.data[layerName];\r\n\r\n    this.forAll(layerName, (id, r, c) => {\r\n      let keyData = layerData[r][c];\r\n      const keyDOM = document.getElementById(id);\r\n\r\n      keyDOM.classList.remove(\"pressed\");\r\n\r\n      if (keyData.match(/^(\\s+)?_+(\\s+)?$/m)) {\r\n        Key.addFade(id);\r\n        Key.setContent(id, \"\");\r\n      } else {\r\n        Key.removeFade(id);\r\n        if (Key.getTargetLayer(keyData) === Store.getCurrLayer()) {\r\n          Key.setContent(id, Key.removeSquareBrackets(keyData));\r\n          keyDOM.classList.add(\"pressed\");\r\n        } else {\r\n          Key.setContent(id, keyData);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.updateInteractivity();\r\n  },\r\n  updateInteractivity() {\r\n    const currLayer = Store.getCurrLayer();\r\n\r\n    this.forAll(currLayer, (id) => {\r\n      let keyName = Key.getContent(id);\r\n\r\n      if (hasLayerInName(keyName)) {\r\n        Key.makeInteractive(id);\r\n      } else {\r\n        Key.removeInteractivity(id);\r\n      }\r\n    });\r\n  },\r\n  forAll(layerName, callback) {\r\n    l = Store.data[layerName];\r\n    for (row in l) {\r\n      for (col in l[row]) {\r\n        const id = `${row}x${col}`;\r\n        callback(id, row, col);\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\nconst Key = {\r\n  setContent(id, val) {\r\n    let span = document.getElementById(id).getElementsByTagName(\"span\")[0];\r\n    span.innerHTML = val;\r\n  },\r\n  getContent(id) {\r\n    let span = document.getElementById(id).getElementsByTagName(\"span\")[0];\r\n    return span.innerHTML;\r\n  },\r\n  getTargetLayer(keyName) {\r\n    return Store.layers.find((l) => {\r\n      return keyName.includes(l);\r\n    });\r\n  },\r\n  makeInteractive(id) {\r\n    let keyDOM = document.getElementById(id);\r\n\r\n    keyDOM.onclick = () => {\r\n      this.clicked(id);\r\n    };\r\n    keyDOM.classList.add(\"clickeable\");\r\n  },\r\n  removeInteractivity(id) {\r\n    let keyDOM = document.getElementById(id);\r\n\r\n    keyDOM.onclick = null;\r\n    keyDOM.classList.remove(\"clickeable\");\r\n  },\r\n  clicked(id) {\r\n    const keyName = this.getContent(id);\r\n    let targetLayer = this.getTargetLayer(keyName);\r\n\r\n    if (targetLayer == Store.getCurrLayer()) {\r\n      const activeLayer = Store.getCurrLayer();\r\n      Nav.removeLayer(activeLayer);\r\n      const newActiveLayer = Store.getCurrLayer();\r\n      Keys.renderLayer(newActiveLayer);\r\n    } else {\r\n      Nav.addLayer(targetLayer);\r\n      Keys.renderLayer(targetLayer);\r\n    }\r\n  },\r\n  addFade(id) {\r\n    let keyDOM = document.getElementById(id);\r\n\r\n    keyDOM.classList.add(\"faded\");\r\n  },\r\n  removeFade(id) {\r\n    let keyDOM = document.getElementById(id);\r\n\r\n    keyDOM.classList.remove(\"faded\");\r\n  },\r\n  removeSquareBrackets(keyName) {\r\n    const newName = keyName.replaceAll(/(^\\[\\s?)|(\\s?\\]$)/gm, \"\");\r\n    return newName;\r\n  },\r\n};\r\n\r\nfunction hasLayerInName(keyName) {\r\n  return Store.layers.some((l) => {\r\n    return keyName.includes(l);\r\n  });\r\n}\r\n\r\nexport { Keys, Key };\r\n","import { Store, DOM } from \"./globals\";\r\nimport { Keys } from \"./keyboardInteraction\";\r\n\r\nconst Nav = {\r\n  addLayer(layerName) {\r\n    Store.layerStack.push(layerName);\r\n\r\n    let btnDOM = document.createElement(\"button\");\r\n    btnDOM.innerHTML = layerName;\r\n    btnDOM.classList.add(\"layer-btn\");\r\n    btnDOM.id = layerName;\r\n    btnDOM.onclick = () => {\r\n      this.clicked(layerName);\r\n    };\r\n\r\n    DOM.layerNav.appendChild(btnDOM);\r\n  },\r\n  removeLayer(layerName) {\r\n    Store.layerStack.pop();\r\n\r\n    let layerToRemove = document.getElementById(layerName);\r\n    layerToRemove.remove();\r\n  },\r\n  clicked(targetLayerName) {\r\n    if (targetLayerName == Store.getCurrLayer()) {\r\n      if (Store.layerStack.length > 1) {\r\n        const activeLayer = Store.getCurrLayer();\r\n        this.removeLayer(activeLayer);\r\n        const newActiveLayer = Store.getCurrLayer();\r\n        Keys.renderLayer(newActiveLayer);\r\n      }\r\n    } else {\r\n      let currL = Store.getCurrLayer();\r\n      while (currL !== targetLayerName) {\r\n        this.removeLayer(currL);\r\n        currL = Store.getCurrLayer();\r\n      }\r\n\r\n      Keys.renderLayer(targetLayerName);\r\n    }\r\n  },\r\n};\r\n\r\nexport { Nav };\r\n"],"names":[],"version":3,"file":"index.a0658191.js.map"}